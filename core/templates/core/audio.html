{% extends 'core/base.html' %}
{% load static %}

{% block title %}Audio Mixer - KAIRCAM{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'core/css/audio.css' %}">
{% endblock %}

{% block content %}
<div class="audio-mixer-container">
    
    <div class="mixer-header">
        <div>
            <h1 class="page-title">Mezclador de Audio</h1>
            <p class="page-subtitle">Masterizaci√≥n en tiempo real</p>
        </div>
        
        <button id="btnStartEngine" class="btn-start-engine">
            <span class="status-led"></span> INICIAR MOTOR DE AUDIO
        </button>
    </div>

    <div class="mixer-board">
        <div class="channel-strip" data-channel="1">
            <div class="control-zone">
                <div class="channel-header">
                    <span class="ch-num">01</span>
                    <select class="device-select">
                        <option value="">Sin Entrada</option>
                    </select>
                </div>
                
                <div class="knob-container">
                    <div class="knob-wrapper">
                        <input type="range" class="knob-input gain-knob" min="0" max="200" value="100">
                        <svg class="knob-ring" viewBox="0 0 36 36">
                            <path class="ring-bg" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" />
                            <path class="ring-val" stroke-dasharray="50, 100" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" />
                        </svg>
                    </div>
                    <label>GAIN</label>
                </div>

                <div class="button-group">
                    <button class="btn-tool btn-solo" onclick="mixer.toggleSolo(1)">S</button>
                    <button class="btn-tool btn-mute" onclick="mixer.toggleMute(1)">M</button>
                </div>
            </div>

            <div class="mix-zone">
                <div class="db-value">-inf</div>
                <div class="fader-group">
                    <div class="vu-meter"><div class="vu-seg" id="vu-1-l"></div></div>
                    <div class="fader-track">
                        <input type="range" class="fader-vertical vol-fader" min="0" max="120" value="100">
                    </div>
                    <div class="vu-meter"><div class="vu-seg" id="vu-1-r"></div></div>
                </div>
            </div>
        </div>

        <div class="channel-strip" data-channel="2">
            <div class="control-zone">
                <div class="channel-header">
                    <span class="ch-num">02</span>
                    <select class="device-select">
                        <option value="">Sin Entrada</option>
                    </select>
                </div>
                <div class="knob-container">
                    <div class="knob-wrapper">
                        <input type="range" class="knob-input gain-knob" min="0" max="200" value="100">
                        <svg class="knob-ring" viewBox="0 0 36 36"><path class="ring-bg" d="M18 2 a 16 16 0 0 1 0 32 a 16 16 0 0 1 0 -32"/><path class="ring-val" stroke-dasharray="50, 100" d="M18 2 a 16 16 0 0 1 0 32 a 16 16 0 0 1 0 -32"/></svg>
                    </div>
                    <label>GAIN</label>
                </div>
                <div class="button-group">
                    <button class="btn-tool btn-solo" onclick="mixer.toggleSolo(2)">S</button>
                    <button class="btn-tool btn-mute" onclick="mixer.toggleMute(2)">M</button>
                </div>
            </div>
            <div class="mix-zone">
                <div class="db-value">-inf</div>
                <div class="fader-group">
                    <div class="vu-meter"><div class="vu-seg" id="vu-2-l"></div></div>
                    <div class="fader-track">
                        <input type="range" class="fader-vertical vol-fader" min="0" max="120" value="100">
                    </div>
                    <div class="vu-meter"><div class="vu-seg" id="vu-2-r"></div></div>
                </div>
            </div>
        </div>

        <div class="channel-strip" data-channel="3">
            <div class="control-zone">
                <div class="channel-header">
                    <span class="ch-num">03</span>
                    <select class="device-select">
                        <option value="">Sin Entrada</option>
                    </select>
                </div>
                <div class="knob-container">
                    <div class="knob-wrapper">
                        <input type="range" class="knob-input gain-knob" min="0" max="200" value="100">
                        <svg class="knob-ring" viewBox="0 0 36 36"><path class="ring-bg" d="M18 2 a 16 16 0 0 1 0 32 a 16 16 0 0 1 0 -32"/><path class="ring-val" stroke-dasharray="50, 100" d="M18 2 a 16 16 0 0 1 0 32 a 16 16 0 0 1 0 -32"/></svg>
                    </div>
                    <label>GAIN</label>
                </div>
                <div class="button-group">
                    <button class="btn-tool btn-solo" onclick="mixer.toggleSolo(3)">S</button>
                    <button class="btn-tool btn-mute" onclick="mixer.toggleMute(3)">M</button>
                </div>
            </div>
            <div class="mix-zone">
                <div class="db-value">-inf</div>
                <div class="fader-group">
                    <div class="vu-meter"><div class="vu-seg" id="vu-3-l"></div></div>
                    <div class="fader-track">
                        <input type="range" class="fader-vertical vol-fader" min="0" max="120" value="100">
                    </div>
                    <div class="vu-meter"><div class="vu-seg" id="vu-3-r"></div></div>
                </div>
            </div>
        </div>

        <div class="mixer-sep"></div>

        <div class="channel-strip master-strip" data-channel="master">
            <div class="control-zone">
                <div class="channel-header">
                    <span class="ch-name" style="color: var(--brand-red); display: block; margin-top: 10px;">MASTER OUT</span>
                </div>
                <div class="button-group">
                    <button class="btn-tool btn-dim">DIM</button>
                </div>
            </div>
            <div class="mix-zone">
                <div class="db-value" style="color: var(--brand-red);">0.0</div>
                <div class="fader-group">
                    <div class="vu-meter master-vu"><div class="vu-seg" id="vu-m-l"></div></div>
                    <div class="fader-track">
                        <input type="range" class="fader-vertical vol-fader" min="0" max="120" value="100">
                    </div>
                    <div class="vu-meter master-vu"><div class="vu-seg" id="vu-m-r"></div></div>
                </div>
            </div>
        </div>

    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'core/js/audio.js' %}"></script>
{% endblock %}