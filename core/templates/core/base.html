<!DOCTYPE html>
{% load static %}
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>{% block title %}KAIRCAM - Streaming Video Platform{% endblock %}</title>

    <!-- ✅ FAVICON (LOGO EN LA PESTAÑA) -->
    <link rel="icon" type="image/png" href="{% static 'core/images/logokair.png' %}">
    <link rel="apple-touch-icon" href="{% static 'core/images/logokair.png' %}">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@400;500;600;700&family=Inter:wght@300;400;500;600&family=Material+Icons&display=swap" rel="stylesheet">

    <!-- Base CSS -->
    <link rel="stylesheet" href="{% static 'core/css/base.css' %}">
    {% block extra_css %}{% endblock %}

    <!-- CSRF -->
    <meta name="csrf-token" content="{{ csrf_token }}">
</head>

<body class="{% block body_class %}{% endblock %}">

    <header class="control-header">
      <div class="control-header-container">

        <div class="control-brand">
            <div class="logo-container">
                <img src="{% static 'core/images/logokair.png' %}" alt="Logo" class="logo-img" />
            </div>
            <div class="control-brand-info">
                <h1 class="control-brand-name">KAIRCAM</h1>
                <p class="control-brand-subtitle">Streaming Control</p>
            </div>
        </div>

        <nav class="header-main-nav">
          <a href="{% url 'home' %}" class="nav-item {% if request.resolver_match.url_name == 'home' %}active{% endif %}">
            <span class="material-icons nav-icon">videocam</span>
            Cámaras
          </a>
          <a href="{% url 'audio' %}" class="nav-item {% if request.resolver_match.url_name == 'audio' %}active{% endif %}">
            <span class="material-icons nav-icon">equalizer</span>
            Audio
          </a>
          <a href="{% url 'tutorial' %}" class="nav-item {% if request.resolver_match.url_name == 'tutorial' %}active{% endif %}">
            <span class="material-icons nav-icon">help_outline</span>
            Tutorial
          </a>
        </nav>

        <div class="header-right-side">
            <div class="control-user">
              <div class="user-avatar">
                <span class="user-initials">{{ request.user.username|slice:":2"|upper }}</span>
              </div>

              <div class="user-info" id="userInfo">
                <span class="user-name">{{ request.user.username }}</span>
                <span class="material-icons dropdown-icon">expand_more</span>
              </div>

              <div class="user-menu" id="userMenu">
                
                {% if request.user.is_superuser %}
                  <button class="menu-item" onclick="location.href='{% url 'crear_usuario' %}'">
                    <span class="material-icons menu-icon">person_add</span>
                    Agregar usuario
                  </button>
                  <button class="menu-item" onclick="location.href='{% url 'ver_usuarios' %}'">
                    <span class="material-icons menu-icon">group</span>
                    Ver usuarios
                  </button>
                  <hr class="menu-divider">
                {% endif %}

                <button class="menu-item" onclick="location.href='{% url 'ajustes_perfil' %}'">
                    <span class="material-icons menu-icon">settings</span>
                    Configuración
                </button>

                <button class="menu-item pin-option" onclick="location.href='{% url 'gestionar_pin' %}'">
                    <span class="material-icons menu-icon">lock</span>
                    Gestionar PIN
                </button>

                <hr class="menu-divider">
                
                <button class="menu-item logout-item" onclick="location.href='{% url 'logout' %}'">
                    <span class="material-icons menu-icon">logout</span>
                    Cerrar sesión
                </button>
              </div>
            </div>
        </div>

      </div>
    </header>

    {% block content %}{% endblock %}
    
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <script src="{% static 'core/js/base.js' %}"></script>
    {% block extra_js %}{% endblock %}
    {{ available_platforms|json_script:"data-plataformas-disponibles" }}
</body>
</html>